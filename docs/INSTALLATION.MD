# üì¶ Package de Documentation et Scripts - GoodFood Infra

Tous les fichiers ont √©t√© cr√©√©s avec succ√®s ! üéâ

---

## üìÇ Fichiers Cr√©√©s

### 1. Documentation

| Fichier | Destination | Description |
|---------|-------------|-------------|
| `README.md` | Racine du projet | README principal avec quick start |
| `docs/README-SOPS.md` | `docs/` | Guide complet SOPS et Age |
| `docs/02-preprod-setup.md` | `docs/` | Guide setup preprod avec proc√©dures manuelles |

### 2. Scripts

| Fichier | Destination | Description |
|---------|-------------|-------------|
| `scripts/accept-ssh-fingerprints.sh` | `scripts/` | Accepte les fingerprints SSH automatiquement |
| `scripts/update-inventory-from-terraform.sh` | `scripts/` | Met √† jour l'inventory depuis Terraform |

### 3. Configuration

| Fichier | Destination | Description |
|---------|-------------|-------------|
| `.env.example` | Racine du projet | Template pour le fichier .env |
| `ansible-k3s-ansible-inventory.yml.example` | `ansible/k3s-ansible/` (comme exemple) | Exemple d'inventory |

---

## üöÄ Installation Rapide

### 1Ô∏è‚É£ Copier les fichiers

```bash
# Depuis le dossier o√π vous avez t√©l√©charg√© les fichiers

# Documentation
cp README.md /chemin/vers/goodfood-infra/
cp docs/README-SOPS.md /chemin/vers/goodfood-infra/docs/
cp docs/02-preprod-setup.md /chemin/vers/goodfood-infra/docs/

# Scripts
cp scripts/accept-ssh-fingerprints.sh /chemin/vers/goodfood-infra/scripts/
cp scripts/update-inventory-from-terraform.sh /chemin/vers/goodfood-infra/scripts/

# Configuration
cp .env.example /chemin/vers/goodfood-infra/
```

### 2Ô∏è‚É£ Rendre les scripts ex√©cutables

```bash
cd /chemin/vers/goodfood-infra/

chmod +x scripts/accept-ssh-fingerprints.sh
chmod +x scripts/update-inventory-from-terraform.sh
```

### 3Ô∏è‚É£ Cr√©er le fichier .env

```bash
cd /chemin/vers/goodfood-infra/

# Copier le template
cp .env.example .env

# G√©n√©rer un token
openssl rand -hex 32

# √âditer et ajouter le token
nano .env
# Ajouter: K3S_TOKEN=<le-token-g√©n√©r√©>
```

### 4Ô∏è‚É£ V√©rifier que tout est en place

```bash
# Documentation
ls -la docs/README-SOPS.md
ls -la docs/02-preprod-setup.md

# Scripts
ls -la scripts/accept-ssh-fingerprints.sh
ls -la scripts/update-inventory-from-terraform.sh

# Configuration
ls -la .env
```

---

## ‚úÖ Checklist de V√©rification

- [ ] `README.md` √† la racine
- [ ] `docs/README-SOPS.md` dans le dossier docs
- [ ] `docs/02-preprod-setup.md` dans le dossier docs
- [ ] `scripts/accept-ssh-fingerprints.sh` dans scripts/ (ex√©cutable)
- [ ] `scripts/update-inventory-from-terraform.sh` dans scripts/ (ex√©cutable)
- [ ] `.env` cr√©√© et configur√© avec K3S_TOKEN
- [ ] `.gitignore` contient `.env` (pour ne pas le versionner)

---

## üéØ Prochaines √âtapes

1. **Lire la documentation**
   ```bash
   # Commencez par le README principal
   cat README.md
   
   # Puis le guide preprod
   cat docs/02-preprod-setup.md
   ```

2. **Configurer SOPS** (si vous utilisez Terraform)
   ```bash
   # Suivez le guide
   cat docs/README-SOPS.md
   ```

3. **Tester le setup preprod**
   ```bash
   # Avec le Makefile
   make help
   make setup-all
   
   # Ou manuellement en suivant docs/02-preprod-setup.md
   ```

---

## üìö Commandes Utiles

```bash
# Afficher l'aide du Makefile
make help

# Setup complet
make setup-all

# Mettre √† jour l'inventory
make update-inventory

# Accepter les fingerprints SSH
make accept-ssh

# Installer K3s
make setup-k3s

# Installer ArgoCD
make setup-argocd

# D√©ployer les secrets et apps
make deploy-secrets
make deploy-apps
```

---

## üêõ En Cas de Probl√®me

Consultez la section **Troubleshooting** dans :
- `docs/02-preprod-setup.md` (section compl√®te avec solutions)
- Chaque script affiche des messages d'erreur avec les proc√©dures manuelles

---

## üìû Support

Si vous rencontrez des probl√®mes :

1. V√©rifiez la section Troubleshooting du guide preprod
2. V√©rifiez que tous les pr√©requis sont install√©s
3. Essayez les proc√©dures manuelles si les scripts √©chouent
4. Consultez les logs Ansible/Terraform pour plus de d√©tails

---

**Bonne documentation et bon d√©ploiement ! üöÄ**